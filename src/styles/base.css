@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* Minimal White Theme - Clean & Modern */

  :root,
  html[data-theme="light"] {
    --color-fill: 255, 255, 255; /* Pure white background */
    --color-text-base: 23, 23, 23; /* Near black - WCAG AAA contrast (15.3:1) */
    --color-text-muted: 82, 82, 91; /* Zinc 600 - Secondary text (7:1) */
    --color-accent: 20, 184, 166; /* Teal 500 - Fresh teal */
    --color-card: 255, 255, 255; /* Pure white cards */
    --color-card-muted: 250, 250, 250; /* Ultra subtle hover */
    --color-border: 244, 244, 245; /* Zinc 100 - Barely visible borders */
    --color-accent-secondary: 13, 148, 136; /* Teal 600 - Darker teal */
    --color-gradient-start: 20, 184, 166; /* Teal gradient start */
    --color-gradient-end: 6, 182, 212; /* Cyan gradient end */
    --color-shadow: 0, 0, 0; /* Subtle shadows */
  }

  html[data-theme="dark"] {
    --color-fill: 17, 24, 39; /* Gray 900 - Deep but not pure black */
    --color-text-base: 249, 250, 251; /* Gray 50 - Soft white text */
    --color-accent: 45, 212, 191; /* Teal 400 - Bright teal */
    --color-card: 31, 41, 55; /* Gray 800 - Elevated cards */
    --color-card-muted: 55, 65, 81; /* Gray 700 - Hover state */
    --color-border: 55, 65, 81; /* Gray 700 - Subtle borders */
    --color-accent-secondary: 94, 234, 212; /* Teal 300 - Lighter teal */
    --color-gradient-start: 45, 212, 191; /* Teal gradient start */
    --color-gradient-end: 34, 211, 238; /* Cyan gradient end */
    --color-shadow: 0, 0, 0; /* Shadows */
  }

  #sun-svg,
  html[data-theme="dark"] #moon-svg {
    display: none;
  }
  #moon-svg,
  html[data-theme="dark"] #sun-svg {
    display: block;
  }
  body {
    @apply flex min-h-[100svh] flex-col bg-skin-fill font-sans text-skin-base selection:bg-skin-accent/20 selection:text-skin-base;
    /* Optimal reading experience */
    font-size: 18px; /* Research-backed optimal size */
    line-height: 1.7; /* Golden ratio for readability */
    letter-spacing: -0.011em; /* Subtle optical adjustment */
    font-feature-settings: "kern" 1, "liga" 1, "calt" 1; /* Enable ligatures */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    transition:
      background-color 0.3s ease,
      color 0.3s ease;
  }

  section,
  footer {
    @apply mx-auto px-6 sm:px-8;
    max-width: 72ch; /* Optimal line length: 66ch +/- 10% */
  }

  section {
    @apply py-16 sm:py-20;
  }
  a {
    @apply outline-2 outline-offset-1 outline-skin-fill focus-visible:no-underline focus-visible:outline-dashed;
  }
  svg {
    @apply inline-block h-6 w-6 fill-skin-base group-hover:fill-skin-accent;
  }
  svg.icon-tabler {
    @apply inline-block h-6 w-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110;
  }
  .prose {
    /* Typography perfection for long-form reading */
    @apply prose-lg prose-zinc;

    /* Headings with proper hierarchy */
    @apply prose-headings:font-semibold prose-headings:tracking-tight prose-headings:text-skin-base;
    @apply prose-h1:text-4xl prose-h1:leading-tight prose-h1:mb-6 prose-h1:mt-12;
    @apply prose-h2:text-3xl prose-h2:leading-snug prose-h2:mb-5 prose-h2:mt-10;
    @apply prose-h3:text-2xl prose-h3:leading-snug prose-h3:mb-4 prose-h3:mt-8;
    @apply prose-h4:text-xl prose-h4:mb-3 prose-h4:mt-6;

    /* Paragraphs with optimal spacing */
    @apply prose-p:text-skin-base prose-p:leading-[1.8] prose-p:mb-6;
    @apply prose-p:text-[18px] prose-p:font-normal;

    /* Links with clear affordance */
    @apply prose-a:text-skin-accent prose-a:font-medium prose-a:no-underline;
    @apply prose-a:decoration-2 prose-a:underline-offset-4 prose-a:transition-colors;
    @apply hover:prose-a:text-skin-accent-secondary hover:prose-a:underline;

    /* Lists with breathing room */
    @apply prose-ul:my-6 prose-ol:my-6;
    @apply prose-li:text-skin-base prose-li:my-2 prose-li:leading-[1.8];
    @apply prose-li:marker:text-skin-accent;

    /* Code blocks */
    @apply prose-code:text-[15px] prose-code:font-medium;
    @apply prose-code:bg-zinc-100 prose-code:text-zinc-800;
    @apply prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded;
    @apply prose-code:before:content-none prose-code:after:content-none;

    @apply prose-pre:bg-zinc-900 prose-pre:text-zinc-50;
    @apply prose-pre:rounded-xl prose-pre:border prose-pre:border-zinc-200;
    @apply prose-pre:shadow-sm prose-pre:my-6 prose-pre:p-6;

    /* Blockquotes */
    @apply prose-blockquote:border-l-4 prose-blockquote:border-skin-accent;
    @apply prose-blockquote:pl-6 prose-blockquote:italic prose-blockquote:my-6;
    @apply prose-blockquote:text-skin-base/80;

    /* Tables */
    @apply prose-table:my-8 prose-table:border-collapse;
    @apply prose-th:border prose-th:border-zinc-200 prose-th:p-3;
    @apply prose-th:bg-zinc-50 prose-th:font-semibold;
    @apply prose-td:border prose-td:border-zinc-200 prose-td:p-3;

    /* Images */
    @apply prose-img:rounded-xl prose-img:my-8 prose-img:shadow-md;

    /* Strong and emphasis */
    @apply prose-strong:font-semibold prose-strong:text-skin-base;
    @apply prose-em:italic;

    /* HR */
    @apply prose-hr:border-zinc-200 prose-hr:my-12;
  }
  .prose a {
    @apply break-words hover:!text-skin-accent;
  }
  .prose thead th:first-child,
  tbody td:first-child,
  tfoot td:first-child {
    padding-left: 0.5714286em;
  }
  .prose h2#table-of-contents {
    @apply mb-2;
  }
  .prose details {
    @apply inline-block cursor-pointer select-none text-skin-base;
  }
  .prose summary {
    @apply focus-outline;
  }
  .prose h2#table-of-contents + p {
    @apply hidden;
  }

  /* ===== scrollbar ===== */
  html {
    overflow-y: scroll;
  }

  /* width */
  ::-webkit-scrollbar {
    @apply w-3;
  }

  /* Track */
  ::-webkit-scrollbar-track {
    @apply bg-skin-fill;
  }

  /* Handle */
  ::-webkit-scrollbar-thumb {
    @apply bg-skin-card;
  }

  /* Handle on hover */
  ::-webkit-scrollbar-thumb:hover {
    @apply bg-skin-card-muted;
  }

  /* ===== Code Blocks & Syntax Highlighting ===== */
  pre:has(code) {
    @apply border border-skin-line;
  }
  code,
  blockquote {
    word-wrap: break-word;
  }

  pre > code {
    white-space: pre;
  }

  /* Apply Dark Theme (if multi-theme specified) */
  html[data-theme="dark"] pre:has(code),
  html[data-theme="dark"] pre:has(code) span {
    color: var(--shiki-dark) !important;
    background-color: var(--shiki-dark-bg) !important;
    font-style: var(--shiki-dark-font-style) !important;
    font-weight: var(--shiki-dark-font-weight) !important;
    text-decoration: var(--shiki-dark-text-decoration) !important;
  }
}

@layer components {
  .display-none {
    @apply hidden;
  }
  .focus-outline {
    @apply outline-2 outline-offset-1 outline-skin-fill focus-visible:no-underline focus-visible:outline-dashed;
  }

  /* Minimal Theme Enhancements */
  .card-minimal {
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 1px 3px 0 rgb(var(--color-shadow) / 0.05);
  }

  .card-minimal:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 25px -5px rgb(var(--color-shadow) / 0.08),
      0 4px 6px -2px rgb(var(--color-shadow) / 0.03);
  }

  /* Subtle accent indicator */
  .accent-bar {
    position: relative;
  }

  .accent-bar::before {
    content: "";
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 3px;
    background: linear-gradient(
      to bottom,
      rgb(var(--color-gradient-start)),
      rgb(var(--color-gradient-end))
    );
    opacity: 0;
    transition: opacity 0.2s ease;
    border-radius: 2px;
  }

  .accent-bar:hover::before {
    opacity: 1;
  }

  /* Clean button style */
  .btn-minimal {
    @apply inline-flex items-center gap-2 rounded-lg border border-skin-line bg-skin-card px-4 py-2 text-sm font-medium text-skin-base transition-all hover:border-skin-accent hover:text-skin-accent;
  }

  /* Subtle gradient text */
  .gradient-text {
    background: linear-gradient(
      135deg,
      rgb(var(--color-gradient-start)),
      rgb(var(--color-gradient-end))
    );
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
  }
}
